<% include ../../shared/header %>
<% include ../../shared/nav %>
	<div class="_pea-container">
		<div class="_pea_row">
			<div class="_pea-col-span12">
				<h1>Installed Extensions <small><a href="#add-extensions" class="">(Add Extensions)</a></small></h1>
			</div>
		</div>
		<div class="_pea-row">
			<div class="_pea-col-span12">
				<div class="_pea-document">
					<table class="_pea-table _pea-no-bottomborder">
						<thead>
							<tr class="_pea-text-left">
								<th>Name</th>
								<th>Version</th>
								<th>Installed</th>
								<th>Enabled</th>
								<th>Dependencies</th>
							</tr>
						</thead>
						<tbody>
							<% if(extensions.length>0){
									extensions.forEach(function(extension){ %>
										<tr>
											<td> 
												<a href="/p-admin/extensions/view/<%= extension.name %>"> <%= extension.name %>
													<%if(extension.author && extension.author.name){%>
														, by <%= extension.author.name %>
													<%}%>
												</a>
											</td>
											<td>
												<%= extension.version %>
											</td>
											<td>
												<%= extension.installed %>
											</td>
											<td>
												<%= extension.enabled %>
											</td>
											<td>
												<%if(extension.periodicConfig 
													&& extension.periodicConfig.periodicDependencies
													&& extension.periodicConfig.periodicDependencies.length>0){
													extension.periodicConfig.periodicDependencies.forEach(function(extensiondependency){%>
														<%= extensiondependency.extname %> @ <%= extensiondependency.version %>,
													<%});
												}%>
											</td>
										</tr>
										<%
									});
								}
								else{ %>
									<tr><td colspan="5" class="_pea-text-center">No Extensions!</td></tr>
								<%} %>
						</tbody>
						<!-- <tfoot>
							<tr class="_pea-text-left">
								<th>Title</th>
								<th>Author</th>
								<th>Categories</th>
								<th>Tags</th>
								<th>Type</th>
								<th>Date</th>
							</tr>
						</tfoot> -->
					</table>
				</div>
			</div>
		</div>
		<div class="_pea-row">
			<div class="_pea-col-span6">
				<h1><a name="add-extensions"></a>Add Extensions</h1>
			</div>
		</div>
		<div class="_pea-row">
			<div class="_pea-col-span12">
				<div class="_pea-document">
					<div class="_pea-row">
						<div class="_pea-col-span9">
							<div class="_pea-row _pea-container-forminput _pea-text-center _pea-form">
								<input type="text" id="padmin-search-ext" class="_pea-col-span10" placeholder="Search" name="search-ext"/>
								<input type="submit" name="search-ext_button" value="Search" class="_pea-button _pea-col-span2 _pea-color-default"/>
							</div>
						</div>
						<div class="_pea-col-span1">
							<div class="_pea-row _pea-container-forminput _pea-text-center">
							or								
							</div>
						</div>
						<div class="_pea-col-span2">
							<div class="_pea-row _pea-container-forminput _pea-text-center _pea-form">
								<input type="submit" name="upload-ext_button" value="Upload" class="_pea-button _pea-col-span12 _pea-color-default"/>
							</div>
						</div>
					</div>
					<table id="ext-search-results" class="_pea-hidden _pea-table _pea-no-bottomborder">
						<thead>
							<tr class="_pea-text-left">
								<th>Name</th>
								<th>Description</th>
								<th>Install</th>
							</tr>
						</thead>
						<tbody>
							
						</tbody>
						<!-- <tfoot>
							<tr class="_pea-text-left">
								<th>Title</th>
								<th>Author</th>
								<th>Categories</th>
								<th>Tags</th>
								<th>Type</th>
								<th>Date</th>
							</tr>
						</tfoot> -->
					</table>
				</div>
			</div>
		</div>
		<div class="_pea_row">
			<div class="_pea-col-span12">
			<!-- <div class="_pea-col-span6 _pea-text-right">
				<form class="_pea-form" method="get">
					<input type="text" placeholder="search" name="search"/>
				</form>
			</div>  -->
				<p>to search extensions: 
					<ul>
						<li>search github api, periodicjs.ext.[name of plugin]</li>
						<li>https://api.github.com/search/repositories?q=periodicjs like https://api.github.com/search/repositories?q=periodicjs.ext.ex, more info</li>
					</ul>
				</p>
				<p>to install extensions:
				-https://api.github.com/repos/typesettin/periodicjs.ext.example/tags
					<ul>
						<li>clean log file output, start writting console to file</li>
						<li>ajax poll log file</li>
						<li>ajax button, ask if latest of specific version</li>
						<li>download from github or upload zip: ex using https://github.com/jprichardson/node-github-download</li>
						<li>run npm install in that directory to get - https://www.npmjs.org/package/npm</li>
						<li>if public directory copy into app public dir</li>
						<li>call periodic install extension (check for dependencies and version), if good, update extensions.json, with updated and installed date</li>
					</ul>
					-put content log dir, with ext name-username
				</p>
				<p>to enable extensions:
					<ul>
						<li>ajax button</li>
						<li>if good, update extensions.json</li>
					</ul>
				</p>
				<p>to view extensions:
					<ul>
						<li>read both packson.json and periodic.ext.json, render two code mirror</li>
					</ul>
				</p>
				<p>to update admin interface:
					<ul>
						<li>put menu under extension name{"periodicjs.ext.admin":{"menu":{"extensions":{"link":"/myextensionviewlink"}}}} in conf</li>
						<li>add "settinglink" in conf</li>
					</ul>
				</p>
			</div>
		</div>
	</div>
<% include ../../shared/footer %>
