var path = require('path');
module.exports = function(periodic){
	// express,app,logger,config,db,mongoose
	var adminRouter = periodic.express.Router(),
		postController = require('../../../../app/controller/post')(periodic),
		adminController = require('./controller/admin')(periodic),
		authController = require('../periodicjs.ext.login/controller/auth')(periodic);

	adminRouter.get('/',authController.ensureAuthenticated,adminController.index);
	adminRouter.get('/posts',authController.ensureAuthenticated,postController.loadPosts,adminController.posts_index);

	periodic.app.use('/p-admin',adminRouter);
};